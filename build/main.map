{"version":3,"sources":["webpack:///webpack/bootstrap 4093fb6460ca0de21246","webpack:///external \"feathers-authentication\"","webpack:///external \"sequelize\"","webpack:///external \"path\"","webpack:///external \"feathers-sequelize\"","webpack:///external \"feathers-hooks-common\"","webpack:///external \"fs\"","webpack:///external \"winston\"","webpack:///external \"feathers-authentication-local\"","webpack:///external \"feathers-authentication-management\"","webpack:///./src/notifier.js","webpack:///./src/tiler.js","webpack:///./src/index.js","webpack:///./src/app.js","webpack:///external \"serve-favicon\"","webpack:///external \"compression\"","webpack:///external \"cors\"","webpack:///external \"helmet\"","webpack:///external \"body-parser\"","webpack:///external \"feathers\"","webpack:///external \"feathers-configuration\"","webpack:///external \"feathers-hooks\"","webpack:///external \"feathers-rest\"","webpack:///external \"feathers-socketio\"","webpack:///external \"feathers-errors/handler\"","webpack:///external \"feathers-errors/not-found\"","webpack:///./src/middleware/index.js","webpack:///./src/services/index.js","webpack:///./src/services/users/users.service.js","webpack:///./src/models/users.model.js","webpack:///./src/services/users/users.hooks.js","webpack:///external \"feathers-authentication-hooks\"","webpack:///./src/hooks/send-verification-email.js","webpack:///external \"pug\"","webpack:///./src/hooks/user-client.js","webpack:///./src/hooks/user-client-after.js","webpack:///./src/hooks/users-restrict.js","webpack:///external \"feathers-errors\"","webpack:///./src/services/users/users.filters.js","webpack:///./src/services/roles/roles.service.js","webpack:///./src/models/roles.model.js","webpack:///./src/services/roles/roles.hooks.js","webpack:///./src/services/roles/roles.filters.js","webpack:///./src/services/email/email.service.js","webpack:///external \"feathers-mailer\"","webpack:///./src/services/email/email.hooks.js","webpack:///external \"nodemailer-smtp-transport\"","webpack:///./src/services/company/company.service.js","webpack:///./src/models/company.model.js","webpack:///./src/services/company/company.hooks.js","webpack:///./src/services/company/company.filters.js","webpack:///./src/services/cvr/cvr.service.js","webpack:///external \"feathers-elasticsearch\"","webpack:///./src/models/cvr.model.js","webpack:///external \"elasticsearch\"","webpack:///./src/services/cvr/cvr.hooks.js","webpack:///./src/services/cvr/cvr.filters.js","webpack:///./src/services/fonts/fonts.service.js","webpack:///./src/services/fonts/fonts.class.js","webpack:///./src/services/fonts/fonts.hooks.js","webpack:///./src/services/fonts/fonts.filters.js","webpack:///./src/services/files/files.service.js","webpack:///./src/services/files/files.class.js","webpack:///./src/services/files/files.hooks.js","webpack:///./src/services/files/files.filters.js","webpack:///./src/services/data/data.service.js","webpack:///./src/models/data.model.js","webpack:///./src/services/data/data.hooks.js","webpack:///./src/hooks/tile.js","webpack:///external \"geojson-vt\"","webpack:///external \"@mapbox/mbtiles\"","webpack:///external \"vt-pbf\"","webpack:///external \"zlib\"","webpack:///external \"@turf/bbox\"","webpack:///external \"@turf/center-of-mass\"","webpack:///./src/hooks/remove-mbtile.js","webpack:///./src/hooks/data-before-find.js","webpack:///./src/hooks/no-returning.js","webpack:///./src/hooks/data-after-patch.js","webpack:///./src/hooks/data-after-create.js","webpack:///./src/services/data/data.filters.js","webpack:///./src/services/projects/projects.service.js","webpack:///./src/models/projects.model.js","webpack:///./src/services/projects/projects.hooks.js","webpack:///./src/services/projects/projects.filters.js","webpack:///./src/app.hooks.js","webpack:///./src/hooks/logger.js","webpack:///./src/authentication.js","webpack:///external \"feathers-authentication-jwt\"","webpack:///./src/sequelize.js","webpack:///./src/seed/index.js","webpack:///./src/seed/roles.js","webpack:///./src/seed/users.js","webpack:///./src/seed/company.js"],"names":["path","require","pug","isProd","returnEmail","module","exports","app","getLink","type","hash","port","host","protocal","sendEmail","email","service","create","then","result","console","log","catch","err","notifier","user","notifierOptions","hashLink","emailAccountTemplatesPath","join","__dirname","templatePath","compiledHTML","verifyToken","renderFile","logo","name","from","to","subject","html","resetToken","geojsonvt","MBTiles","vtpbf","zlib","fs","bbox","centerOfMass","Tiler","data","_service","_features","_current","_last","_data","Object","assign","_mbtilesFile","process","env","MBTILES","id","prototype","remove","Promise","resolve","reject","unlink","putTile","_tileIndex","tileCoords","length","center","geojson","_mbtiles","putInfo","bounds","geometry","coordinates","version","description","format","map","minzoom","maxzoom","fields","stopWriting","close","progress","Math","round","patch","item","tile","getTile","z","x","y","layers","features","forEach","feature","indexOf","tags","push","hasOwnProperty","layers2","keys","key","layer","GeoJSONWrapper","buff","fromVectorTileJs","buffer","Buffer","gzip","debug","maxZoom","indexMaxZoom","indexMaxPoints","tileIndex","mbtiles","startWriting","logger","get","server","listen","on","reason","p","error","info","favicon","compress","cors","helmet","bodyParser","feathers","configuration","hooks","rest","socketio","handler","notFound","middleware","services","appHooks","authentication","sequelize","configure","use","json","limit","urlencoded","extended","static","users","roles","company","cvr","fonts","files","projects","createService","createModel","filters","Model","options","paginate","default","max","filter","Sequelize","DataTypes","sequelizeClient","define","UUID","primaryKey","defaultValue","UUIDV4","STRING","allowNull","unique","password","isEnabled","BOOLEAN","role","isVerified","verifyShortToken","verifyExpires","DATE","verifyChanges","JSONB","resetShortToken","resetExpires","beforeCount","raw","associate","models","belongsTo","authenticate","commonHooks","restrictToOwner","hashPassword","verifyHooks","restrict","idField","ownerField","sendVerificationEmail","userClient","userClientAfter","usersRestrict","before","all","find","addVerification","update","disallow","iff","isProvider","preventChanges","after","when","hook","params","provider","discard","removeVerification","accountService","include","model","query","errors","NotAuthenticated","NotAcceptable","companyId","Forbidden","NotFound","warn","connection","Mailer","smtpTransport","elasticsearch","index","Client","apiVersion","Service","constructor","text","Array","isArray","current","readdir","file","extname","basename","TEXT","meta","FLOAT","removeMbtile","dataBeforeFind","noReturning","dataAfterPatch","dataAfterCreate","tiler","attributes","$returning","bypass","$select","public","message","method","jwt","local","authManagement","config","strategies","seed","connectionString","dialect","logging","freezeTableName","oldSetup","setup","set","args","apply","sync","rolesData","usersData","companyData","ifEmptyCreate2","ifEmptyCreate","bind","found","Number","isInteger","total","$lt","system","admin","basic","PASSWORD","clients","cvrno","client"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4093fb6460ca0de21246","module.exports = require(\"feathers-authentication\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-authentication\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"feathers-sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-sequelize\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"feathers-hooks-common\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-hooks-common\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"feathers-authentication-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-authentication-local\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"feathers-authentication-management\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-authentication-management\"\n// module id = 8\n// module chunks = 0","const path = require('path')\nconst pug = require('pug')\nconst isProd = process.env.NODE_ENV === 'production'\nconst returnEmail = 'noreply@le34.dk'\nmodule.exports = function (app) {\n  function getLink (type, hash) {\n    var port = isProd ? '' : ':3000'\n    var host = isProd ? 'survey.le34.dk' : 'localhost'\n    var protocal = isProd ? 'https' : 'http'\n    protocal += '://'\n    return `${protocal}${host}${port}/${type}/${hash}`\n  }\n  function sendEmail (email) {\n    return app.service('email').create(email).then(function (result) {\n      console.log('Sent email', result)\n    }).catch(err => {\n      console.log('Error sending email', err)\n    })\n  }\n  return {\n    notifier: function (type, user, notifierOptions) {\n      console.log(`-- Preparing email for ${type}`)\n      var hashLink\n      var email\n      var emailAccountTemplatesPath = path.join(__dirname, 'email-templates')\n      console.log('emailAccountTemplatesPath', emailAccountTemplatesPath)\n      var templatePath\n      var compiledHTML\n\n      switch (type) {\n        case 'resendVerifySignup': // send another email with link for verifying user's email addr\n\n          hashLink = getLink('verify', user.verifyToken)\n          console.log(hashLink)\n          templatePath = path.join(emailAccountTemplatesPath, 'verify-email.pug')\n\n          compiledHTML = pug.renderFile(templatePath, {\n            logo: '',\n            name: user.name || user.email,\n            hashLink,\n            returnEmail\n          })\n\n          email = {\n            from: returnEmail,\n            to: user.email,\n            subject: 'Confirm Signup',\n            html: compiledHTML\n          }\n\n          return sendEmail(email)\n        case 'sendResetPwd': // inform that user's email is now confirmed\n\n          hashLink = getLink('reset', user.resetToken)\n\n          templatePath = path.join(emailAccountTemplatesPath, 'reset-password.pug')\n\n          compiledHTML = pug.renderFile(templatePath, {\n            logo: '',\n            name: user.name || user.email,\n            hashLink,\n            returnEmail\n          })\n\n          email = {\n            from: returnEmail,\n            to: user.email,\n            subject: 'Reset Password',\n            html: compiledHTML\n          }\n\n          return sendEmail(email)\n        case 'resetPwd': // inform that user's email is now confirmed\n\n          hashLink = getLink('reset', user.resetToken)\n\n          templatePath = path.join(emailAccountTemplatesPath, 'password-was-reset.pug')\n\n          compiledHTML = pug.renderFile(templatePath, {\n            logo: '',\n            name: user.name || user.email,\n            hashLink,\n            returnEmail\n          })\n\n          email = {\n            from: returnEmail,\n            to: user.email,\n            subject: 'Your password was reset',\n            html: compiledHTML\n          }\n\n          return sendEmail(email)\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/notifier.js","/* eslint no-new: 0 */\nvar geojsonvt = require('geojson-vt')\nvar MBTiles = require('@mapbox/mbtiles')\nvar path = require('path')\nvar vtpbf = require('vt-pbf')\nvar zlib = require('zlib')\nvar fs = require('fs')\nvar bbox = require('@turf/bbox')\nvar centerOfMass = require('@turf/center-of-mass')\nmodule.exports = Tiler\n\nfunction Tiler (data, service) {\n  this._service = service\n  this._features = []\n  this._current = 0\n  this._last = 0\n  this._data = Object.assign({}, data)\n  // this._mbtilesFile = path.join(__dirname, 'data', data.id + '.mbtiles')\n  this._mbtilesFile = path.join(process.env.MBTILES, data.id + '.mbtiles')\n}\n\nTiler.prototype.remove = function () {\n  return new Promise((resolve, reject) => {\n    fs.unlink(this._mbtilesFile, () => {\n      resolve()\n    })\n  })\n}\n\nTiler.prototype.putTile = function () {\n  if (this._current === this._tileIndex.tileCoords.length) {\n    var center = centerOfMass(this._data.geojson)\n    this._mbtiles.putInfo({\n      bounds: bbox(this._data.geojson),\n      center: [center.geometry.coordinates[0], center.geometry.coordinates[1], 16],\n      version: '2',\n      name: this._data.id,\n      description: this._data.name,\n      type: 'overlay',\n      format: 'pbf',\n      'vector_layers': this._features.map((id) => {\n        return {\n          id: id, description: '', minzoom: 0, maxzoom: 22, fields: {}\n        }\n      })\n    }, () => {\n      this._mbtiles.stopWriting(() => {\n        this._mbtiles.close(() => {\n          console.log('closed')\n        })\n      })\n    })\n  } else {\n    const progress = Math.round(100 * (this._current + 1) / this._tileIndex.tileCoords.length)\n    Promise.resolve().then(() => {\n      if (progress > this._last) {\n        this._last = progress\n        return this._service.patch(this._data.id, { progress })\n      }\n    }).then(() => {\n      const item = this._tileIndex.tileCoords[this._current]\n      var tile = this._tileIndex.getTile(item.z, item.x, item.y)\n      var layers = {}\n      tile.features.forEach((feature) => {\n        if (this._features.indexOf(feature.tags.feature) === -1) {\n          this._features.push(feature.tags.feature)\n        }\n        if (!layers.hasOwnProperty(feature.tags.feature)) {\n          layers[feature.tags.feature] = []\n        }\n        layers[feature.tags.feature].push(feature)\n      })\n      var layers2 = {}\n      Object.keys(layers).forEach((key) => {\n        var layer = new vtpbf.GeoJSONWrapper(layers[key])\n        layer.name = key\n        layer.version = 2\n        layers2[key] = layer\n      })\n      var buff = vtpbf.fromVectorTileJs({\n        layers: layers2\n      })\n      var buffer = Buffer.from(buff)\n      zlib.gzip(buffer, (err, result) => {\n        if (!err) {\n          this._mbtiles.putTile(item.z, item.x, item.y, result, () => {\n            this._current++\n            this.putTile()\n          })\n        }\n      })\n    })\n  }\n}\n\nTiler.prototype.create = function () {\n  Promise.resolve().then(() => {\n    return geojsonvt(this._data.geojson, { debug: 0, maxZoom: 20, indexMaxZoom: 20, indexMaxPoints: 0 })\n  }).then((tileIndex) => {\n    this._tileIndex = tileIndex\n    return this.remove()\n  }).then(() => {\n    return new Promise((resolve, reject) => {\n      new MBTiles(this._mbtilesFile, (err, mbtiles) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(mbtiles)\n        }\n      })\n    })\n  }).then((mbtiles) => {\n    this._mbtiles = mbtiles\n    return new Promise((resolve, reject) => {\n      mbtiles.startWriting(err => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve()\n        }\n      })\n    })\n  }).then(() => {\n    this.putTile()\n  }).catch((err) => {\n    console.log(err)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tiler.js","/* eslint-disable no-console */\nconst logger = require('winston')\nconst app = require('./app')\nconst port = app.get('port')\nconst server = app.listen(port)\n\nprocess.on('unhandledRejection', (reason, p) =>\n  logger.error('Unhandled Rejection at: Promise ', p, reason)\n)\n\nserver.on('listening', () =>\n  logger.info('Feathers application started on http://%s:%d', app.get('host'), port)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const path = require('path')\nconst favicon = require('serve-favicon')\nconst compress = require('compression')\nconst cors = require('cors')\nconst helmet = require('helmet')\nconst bodyParser = require('body-parser')\n\nconst feathers = require('feathers')\nconst configuration = require('feathers-configuration')\nconst hooks = require('feathers-hooks')\nconst rest = require('feathers-rest')\nconst socketio = require('feathers-socketio')\n\nconst handler = require('feathers-errors/handler')\nconst notFound = require('feathers-errors/not-found')\n\nconst middleware = require('./middleware')\nconst services = require('./services')\nconst appHooks = require('./app.hooks')\n\nconst authentication = require('./authentication')\n\nconst sequelize = require('./sequelize')\n\nconst app = feathers()\n\n// Load app configuration\napp.configure(configuration())\n// Enable CORS, security, compression, favicon and body parsing\napp.use(cors())\napp.use(helmet())\napp.use(compress())\napp.use(bodyParser.json({ limit: '1gb' }))\napp.use(bodyParser.urlencoded({ extended: true }))\napp.use(favicon(path.join(app.get('public'), 'favicon.ico')))\n// Host the public folder\napp.use('/', feathers.static(app.get('public')))\n\n// Set up Plugins and providers\napp.configure(hooks())\napp.configure(sequelize)\napp.configure(rest())\napp.configure(socketio())\n\n// Configure other middleware (see `middleware/index.js`)\napp.configure(middleware)\napp.configure(authentication)\n// Set up our services (see `services/index.js`)\napp.configure(services)\n\n// Configure a middleware for 404s and the error handler\napp.use(notFound())\napp.use(handler())\n\napp.hooks(appHooks)\n\nmodule.exports = app\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"helmet\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"feathers\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"feathers-configuration\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-configuration\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"feathers-hooks\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-hooks\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"feathers-rest\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-rest\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"feathers-socketio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-socketio\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"feathers-errors/handler\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-errors/handler\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"feathers-errors/not-found\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-errors/not-found\"\n// module id = 25\n// module chunks = 0","module.exports = function () {\n  // Add your custom middleware here. Remember, that\n  // in Express the order matters\n  const app = this // eslint-disable-line no-unused-vars\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/index.js","const users = require('./users/users.service.js')\nconst roles = require('./roles/roles.service.js')\nconst email = require('./email/email.service.js')\nconst company = require('./company/company.service.js')\nconst cvr = require('./cvr/cvr.service.js')\n\nconst fonts = require('./fonts/fonts.service.js')\n\nconst files = require('./files/files.service.js')\n\nconst data = require('./data/data.service.js')\n\nconst projects = require('./projects/projects.service.js')\n\nmodule.exports = function () {\n  const app = this // eslint-disable-line no-unused-vars\n  app.configure(users)\n  app.configure(roles)\n  app.configure(email)\n  app.configure(company)\n  app.configure(cvr)\n  app.configure(fonts)\n  app.configure(files)\n  app.configure(data)\n  app.configure(projects)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/index.js","// Initializes the `users` service on path `/users`\nconst createService = require('feathers-sequelize')\nconst createModel = require('../../models/users.model')\nconst hooks = require('./users.hooks')\nconst filters = require('./users.filters')\n\nmodule.exports = function () {\n  const app = this\n  const Model = createModel(app)\n  // const paginate = app.get('paginate')\n\n  const options = {\n    name: 'users',\n    Model,\n    paginate: {\n      default: 100,\n      max: 1000\n    }\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/users', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('users')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/users/users.service.js","// See http://docs.sequelizejs.com/en/latest/docs/models-definition/\n// for more of what you can do here.\nconst Sequelize = require('sequelize')\nconst DataTypes = Sequelize.DataTypes\n\nmodule.exports = function (app) {\n  const sequelizeClient = app.get('sequelizeClient')\n  const users = sequelizeClient.define('users', {\n    id: {\n      type: DataTypes.UUID,\n      primaryKey: true,\n      defaultValue: DataTypes.UUIDV4\n    },\n    email: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      unique: true\n    },\n    password: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      defaultValue: DataTypes.UUIDV4\n    },\n    isEnabled: {\n      type: DataTypes.BOOLEAN,\n      defaultValue: true\n    },\n    role: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      defaultValue: 'basic'\n    },\n    isVerified: { type: DataTypes.BOOLEAN },\n    verifyToken: { type: DataTypes.STRING },\n    verifyShortToken: { type: DataTypes.STRING },\n    verifyExpires: { type: DataTypes.DATE }, // or a long integer\n    verifyChanges: { type: DataTypes.JSONB }, // an object (key-value map), e.g. { field: \"value\" }\n    resetToken: { type: DataTypes.STRING },\n    resetShortToken: { type: DataTypes.STRING },\n    resetExpires: { type: DataTypes.DATE } // or a long integer\n  }, {\n    hooks: {\n      beforeCount (options) {\n        options.raw = true\n      }\n    }\n  })\n\n  users.associate = function (models) { // eslint-disable-line no-unused-vars\n    // Define associations here\n    // See http://docs.sequelizejs.com/en/latest/docs/associations/\n    models.users.belongsTo(models.company)\n  }\n\n  return users\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/users.model.js","const { authenticate } = require('feathers-authentication').hooks\nconst commonHooks = require('feathers-hooks-common')\nconst { restrictToOwner } = require('feathers-authentication-hooks')\nconst { hashPassword } = require('feathers-authentication-local').hooks\nconst verifyHooks = require('feathers-authentication-management').hooks\nconst restrict = [\n  authenticate('jwt'),\n  restrictToOwner({\n    idField: 'id',\n    ownerField: 'id'\n  })\n]\n\nconst sendVerificationEmail = require('../../hooks/send-verification-email')\n\nconst userClient = require('../../hooks/user-client')\n\nconst userClientAfter = require('../../hooks/user-client-after')\n\nconst usersRestrict = require('../../hooks/users-restrict')\n\nmodule.exports = {\n  before: {\n    all: [],\n    find: [authenticate('jwt'), userClient()],\n    get: [...restrict],\n    create: [hashPassword(), verifyHooks.addVerification()],\n    update: [commonHooks.disallow('external')],\n    patch: [\n      ...restrict,\n      commonHooks.iff(commonHooks.isProvider('external'), commonHooks.preventChanges(\n        'email',\n        'isVerified',\n        'verifyToken',\n        'verifyShortToken',\n        'verifyExpires',\n        'verifyChanges',\n        'resetToken',\n        'resetShortToken',\n        'resetExpires'\n      ))\n    ],\n    remove: [authenticate('jwt'), usersRestrict()]\n  },\n\n  after: {\n    all: [\n      commonHooks.when(\n        hook => hook.params.provider,\n        commonHooks.discard('password', 'verifyExpires', 'resetExpires', 'verifyChanges')\n      )\n    ],\n    find: [],\n    get: [],\n    create: [\n      sendVerificationEmail(),\n      verifyHooks.removeVerification(),\n      userClientAfter()\n    ],\n    update: [userClientAfter()],\n    patch: [userClientAfter()],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/users/users.hooks.js","module.exports = require(\"feathers-authentication-hooks\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-authentication-hooks\"\n// module id = 31\n// module chunks = 0","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\nconst accountService = require('../notifier')\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return function sendVerificationEmail (hook) {\n    const user = hook.result\n    if (user) {\n      accountService(hook.app).notifier('resendVerifySignup', user)\n      return Promise.resolve(hook)\n    }\n    // Hooks can either return nothing or a promise\n    // that resolves with the `hook` object for asynchronous operations\n    return Promise.resolve(hook)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/send-verification-email.js","module.exports = require(\"pug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pug\"\n// module id = 33\n// module chunks = 0","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\n\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return function userClient (hook) {\n    hook.params.sequelize = {\n      include: [ { model: hook.app.services.company.Model } ]\n    }\n    return Promise.resolve(hook)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/user-client.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\n\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return function userClientAfter (hook) {\n    return hook.app.service('/users').find({ query: { id: hook.result.id } }).then(result => {\n      hook.result = result.data[0]\n      return Promise.resolve(hook)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/user-client-after.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\nconst errors = require('feathers-errors')\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return function usersRestrict (hook) {\n    if (!hook.params.user) {\n      throw new errors.NotAuthenticated()\n    }\n    if (hook.params.user.id === hook.id) {\n      throw new errors.NotAcceptable('Du m ikke slette dig selv')\n    }\n    if (hook.params.user.role === 'system') {\n      return Promise.resolve(hook)\n    }\n    return hook.app.service('/users').find({ query: { id: hook.id } }).then(result => {\n      if (result.data.length === 1) {\n        const user = result.data[0]\n        if (hook.params.user.role === 'admin' && hook.params.user.companyId === user.companyId) {\n          return Promise.resolve(hook)\n        }\n        throw new errors.Forbidden('Du har ikke rettigheder til denne handling')\n      }\n      throw new errors.NotFound()\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/users-restrict.js","module.exports = require(\"feathers-errors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-errors\"\n// module id = 37\n// module chunks = 0","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the users service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/users/users.filters.js","// Initializes the `roles` service on path `/roles`\nconst createService = require('feathers-sequelize')\nconst createModel = require('../../models/roles.model')\nconst hooks = require('./roles.hooks')\nconst filters = require('./roles.filters')\n\nmodule.exports = function () {\n  const app = this\n  const Model = createModel(app)\n  const paginate = app.get('paginate')\n\n  const options = {\n    name: 'roles',\n    Model,\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/roles', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('roles')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/roles/roles.service.js","// See http://docs.sequelizejs.com/en/latest/docs/models-definition/\n// for more of what you can do here.\nconst Sequelize = require('sequelize')\nconst DataTypes = Sequelize.DataTypes\n\nmodule.exports = function (app) {\n  const sequelizeClient = app.get('sequelizeClient')\n  const roles = sequelizeClient.define('roles', {\n    id: {\n      type: DataTypes.UUID,\n      primaryKey: true,\n      defaultValue: DataTypes.UUIDV4\n    },\n    role: {\n      type: DataTypes.STRING,\n      allowNull: false,\n      unique: true\n    }\n  },\n  {\n    hooks: {\n      beforeCount (options) {\n        options.raw = true\n      }\n    }\n  })\n\n  roles.associate = function (models) { // eslint-disable-line no-unused-vars\n    // Define associations here\n    // See http://docs.sequelizejs.com/en/latest/docs/associations/\n  }\n\n  return roles\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/roles.model.js","const { authenticate } = require('feathers-authentication').hooks\n\nmodule.exports = {\n  before: {\n    all: [ authenticate('jwt') ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/roles/roles.hooks.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the roles service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/roles/roles.filters.js","// Initializes the `email` service on path `/email`\nconst Mailer = require('feathers-mailer')\nconst hooks = require('./email.hooks')\nconst smtpTransport = require('nodemailer-smtp-transport')\n\nmodule.exports = function () {\n  const app = this\n\n  // Initialize our service with any options it requires\n  app.use('/email', Mailer(smtpTransport(app.get('mail'))))\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('email')\n\n  service.hooks(hooks)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/email/email.service.js","module.exports = require(\"feathers-mailer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-mailer\"\n// module id = 44\n// module chunks = 0","const { disallow } = require('feathers-hooks-common')\n\nmodule.exports = {\n  before: {\n    all: [disallow('external')],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/email/email.hooks.js","module.exports = require(\"nodemailer-smtp-transport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nodemailer-smtp-transport\"\n// module id = 46\n// module chunks = 0","// Initializes the `company` service on path `/company`\nconst createService = require('feathers-sequelize')\nconst createModel = require('../../models/company.model')\nconst hooks = require('./company.hooks')\nconst filters = require('./company.filters')\n\nmodule.exports = function () {\n  const app = this\n  const Model = createModel(app)\n  const paginate = app.get('paginate')\n\n  const options = {\n    name: 'company',\n    Model,\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/company', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('company')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/company/company.service.js","// See http://docs.sequelizejs.com/en/latest/docs/models-definition/\n// for more of what you can do here.\nconst Sequelize = require('sequelize')\nconst DataTypes = Sequelize.DataTypes\n\nmodule.exports = function (app) {\n  const sequelizeClient = app.get('sequelizeClient')\n  const company = sequelizeClient.define('company', {\n    id: {\n      type: DataTypes.UUID,\n      primaryKey: true,\n      defaultValue: DataTypes.UUIDV4\n    },\n    data: {\n      type: DataTypes.JSONB,\n      allowNull: false\n    }\n  }, {\n    hooks: {\n      beforeCount (options) {\n        options.raw = true\n      }\n    }\n  })\n\n  company.associate = function (models) { // eslint-disable-line no-unused-vars\n    // Define associations here\n    // See http://docs.sequelizejs.com/en/latest/docs/associations/\n  }\n\n  return company\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/company.model.js","const { authenticate } = require('feathers-authentication').hooks\n\nmodule.exports = {\n  before: {\n    all: [ authenticate('jwt') ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/company/company.hooks.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the company service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/company/company.filters.js","// Initializes the `cvr` service on path `/cvr`\nconst createService = require('feathers-elasticsearch')\nconst createModel = require('../../models/cvr.model')\nconst hooks = require('./cvr.hooks')\nconst filters = require('./cvr.filters')\n\nmodule.exports = function () {\n  const app = this\n  const Model = createModel(app)\n  const paginate = app.get('paginate')\n  const elasticsearch = {\n    index: 'cvr-permanent',\n    type: 'virksomhed'\n  }\n  const options = {\n    id: 'id',\n    Model,\n    elasticsearch,\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/cvr', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('cvr')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/cvr/cvr.service.js","module.exports = require(\"feathers-elasticsearch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-elasticsearch\"\n// module id = 52\n// module chunks = 0","// See http://docs.sequelizejs.com/en/latest/docs/models-definition/\n// for more of what you can do here.\nconst elasticsearch = require('elasticsearch')\n\nmodule.exports = function (app) {\n  return new elasticsearch.Client({\n    host: 'http://LE34_CVR_I_SKYEN:33614fd2-976e-4e1a-af11-acaa0e1ec994@distribution.virk.dk',\n    apiVersion: '1.7'\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/cvr.model.js","module.exports = require(\"elasticsearch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"elasticsearch\"\n// module id = 54\n// module chunks = 0","const { authenticate } = require('feathers-authentication').hooks\n\nmodule.exports = {\n  before: {\n    all: [ authenticate('jwt') ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/cvr/cvr.hooks.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the cvr service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/cvr/cvr.filters.js","// Initializes the `fonts` service on path `/fonts`\nconst createService = require('./fonts.class.js')\nconst hooks = require('./fonts.hooks')\nconst filters = require('./fonts.filters')\n\nmodule.exports = function () {\n  const app = this\n  const paginate = app.get('paginate')\n\n  const options = {\n    name: 'fonts',\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/fonts', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('fonts')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/fonts/fonts.service.js","/* eslint-disable no-unused-vars */\nclass Service {\n  constructor (options) {\n    this.options = options || {}\n  }\n\n  find (params) {\n    return Promise.resolve([])\n  }\n\n  get (id, params) {\n    return Promise.resolve({\n      id, text: `A new message with ID: ${id}!`\n    })\n  }\n\n  create (data, params) {\n    if (Array.isArray(data)) {\n      return Promise.all(data.map(current => this.create(current)))\n    }\n\n    return Promise.resolve(data)\n  }\n\n  update (id, data, params) {\n    return Promise.resolve(data)\n  }\n\n  patch (id, data, params) {\n    return Promise.resolve(data)\n  }\n\n  remove (id, params) {\n    return Promise.resolve({ id })\n  }\n}\n\nmodule.exports = function (options) {\n  return new Service(options)\n}\n\nmodule.exports.Service = Service\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/fonts/fonts.class.js","const { authenticate } = require('feathers-authentication').hooks\n\nmodule.exports = {\n  before: {\n    all: [ authenticate('jwt') ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/fonts/fonts.hooks.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the fonts service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/fonts/fonts.filters.js","// Initializes the `files` service on path `/files`\nconst createService = require('./files.class.js')\nconst hooks = require('./files.hooks')\nconst filters = require('./files.filters')\n\nmodule.exports = function () {\n  const app = this\n  const paginate = app.get('paginate')\n\n  const options = {\n    name: 'files',\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/files', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('files')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/files/files.service.js","const fs = require('fs')\nconst path = require('path')\nclass Service {\n  constructor (options) {\n    this.options = options || {}\n  }\n\n  find (params) {\n    return new Promise((resolve, reject) => {\n      fs.readdir(path.join(__dirname, '../../../mbtiles'), (err, files) => {\n        if (err) {\n          return reject(err)\n        }\n        const result = files.filter(file => {\n          return path.extname(file) === '.mbtiles'\n        }).map(file => {\n          return { name: path.basename(file, path.extname(file)) }\n        })\n        resolve(result)\n      })\n    })\n  }\n\n  get (id, params) {\n    return Promise.resolve({\n      id, text: `A new message with ID: ${id}!`\n    })\n  }\n\n  create (data, params) {\n    if (Array.isArray(data)) {\n      return Promise.all(data.map(current => this.create(current)))\n    }\n\n    return Promise.resolve(data)\n  }\n\n  update (id, data, params) {\n    return Promise.resolve(data)\n  }\n\n  patch (id, data, params) {\n    return Promise.resolve(data)\n  }\n\n  remove (id, params) {\n    return Promise.resolve({ id })\n  }\n}\n\nmodule.exports = function (options) {\n  return new Service(options)\n}\n\nmodule.exports.Service = Service\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/files/files.class.js","const { authenticate } = require('feathers-authentication').hooks\n\nmodule.exports = {\n  before: {\n    all: [ authenticate('jwt') ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/files/files.hooks.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the files service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/files/files.filters.js","// Initializes the `data` service on path `/data`\nconst createService = require('feathers-sequelize')\nconst createModel = require('../../models/data.model')\nconst hooks = require('./data.hooks')\nconst filters = require('./data.filters')\n\nmodule.exports = function () {\n  const app = this\n  const Model = createModel(app)\n  const paginate = app.get('paginate')\n\n  const options = {\n    name: 'data',\n    Model,\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/data', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('data')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/data/data.service.js","// See http://docs.sequelizejs.com/en/latest/docs/models-definition/\n// for more of what you can do here.\nconst Sequelize = require('sequelize')\nconst DataTypes = Sequelize.DataTypes\n\nmodule.exports = function (app) {\n  const sequelizeClient = app.get('sequelizeClient')\n  const data = sequelizeClient.define('data', {\n    id: {\n      type: DataTypes.UUID,\n      primaryKey: true,\n      defaultValue: DataTypes.UUIDV4\n    },\n    name: {\n      type: DataTypes.TEXT,\n      allowNull: false\n    },\n    meta: {\n      type: DataTypes.JSONB,\n      allowNull: true\n    },\n    geojson: {\n      type: DataTypes.JSONB,\n      allowNull: false\n    },\n    progress: {\n      type: DataTypes.FLOAT,\n      allowNull: false,\n      defaultValue: 0\n    }\n  }, {\n    hooks: {\n      beforeCount (options) {\n        options.raw = true\n      }\n    }\n  })\n\n  data.associate = function (models) { // eslint-disable-line no-unused-vars\n    models.data.belongsTo(models.projects) // generates projectId\n    models.data.belongsTo(models.company) // generates clientId\n    models.data.belongsTo(models.users) // generates userId\n  }\n\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/data.model.js","const { authenticate } = require('feathers-authentication').hooks\nconst { discard } = require('feathers-hooks-common')\nconst tile = require('../../hooks/tile')\nconst removeMbtile = require('../../hooks/remove-mbtile')\nconst dataBeforeFind = require('../../hooks/data-before-find')\nconst noReturning = require('../../hooks/no-returning')\nconst dataAfterPatch = require('../../hooks/data-after-patch')\nconst dataAfterCreate = require('../../hooks/data-after-create')\nmodule.exports = {\n  before: {\n    all: [ ],\n    find: [dataBeforeFind()],\n    get: [],\n    create: [authenticate('jwt')],\n    update: [authenticate('jwt')],\n    patch: [authenticate('jwt'), noReturning()],\n    remove: [authenticate('jwt')]\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [tile(), dataAfterCreate()],\n    update: [tile(), discard('geojson')],\n    patch: [dataAfterPatch()],\n    remove: [removeMbtile(), discard('geojson')]\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/data/data.hooks.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\nconst Tiler = require('../tiler.js')\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return function tile (hook) {\n    const service = hook.app.service('data')\n    const tiler = new Tiler(hook.result, service)\n    tiler.create()\n    // Hooks can either return nothing or a promise\n    // that resolves with the `hook` object for asynchronous operations\n    return Promise.resolve(hook)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/tile.js","module.exports = require(\"geojson-vt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"geojson-vt\"\n// module id = 69\n// module chunks = 0","module.exports = require(\"@mapbox/mbtiles\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@mapbox/mbtiles\"\n// module id = 70\n// module chunks = 0","module.exports = require(\"vt-pbf\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vt-pbf\"\n// module id = 71\n// module chunks = 0","module.exports = require(\"zlib\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zlib\"\n// module id = 72\n// module chunks = 0","module.exports = require(\"@turf/bbox\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@turf/bbox\"\n// module id = 73\n// module chunks = 0","module.exports = require(\"@turf/center-of-mass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@turf/center-of-mass\"\n// module id = 74\n// module chunks = 0","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\nconst fs = require('fs')\nconst path = require('path')\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return function removeMbtile (hook) {\n    // Hooks can either return nothing or a promise\n    // that resolves with the `hook` object for asynchronous operations\n    fs.unlink(path.join(process.env.MBTILES, hook.id + '.mbtiles'))\n    return Promise.resolve(hook)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/remove-mbtile.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\n\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return (hook) => {\n    console.log(hook.params)\n    hook.params.sequelize = {\n      include: [\n        { model: hook.app.services.company.Model, attributes: ['data'] }\n      ]\n    }\n    return hook\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/data-before-find.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\n\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return (hook) => {\n    hook.params.$returning = false\n    return Promise.resolve(hook)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/no-returning.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\n\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return (hook) => {\n    hook.bypass = true\n    return hook.app.service('/data').find({\n      query: {\n        id: hook.id,\n        $select: ['id', 'projectId', 'name', 'createdAt', 'progress']\n      }\n    }).then(result => {\n      hook.result = result[0]\n      return Promise.resolve(hook)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/data-after-patch.js","// Use this hook to manipulate incoming or outgoing data.\n// For more information on hooks see: http://docs.feathersjs.com/api/hooks.html\n\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return (hook) => {\n    return hook.app.service('/data').find({\n      query: {\n        id: hook.result.id,\n        $select: ['id', 'projectId', 'name', 'createdAt', 'progress']\n      }\n    }).then(result => {\n      hook.result = result[0]\n      return Promise.resolve(hook)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/data-after-create.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the data service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/data/data.filters.js","// Initializes the `projects` service on path `/projects`\nconst createService = require('feathers-sequelize')\nconst createModel = require('../../models/projects.model')\nconst hooks = require('./projects.hooks')\nconst filters = require('./projects.filters')\n\nmodule.exports = function () {\n  const app = this\n  const Model = createModel(app)\n  const paginate = app.get('paginate')\n\n  const options = {\n    name: 'projects',\n    Model,\n    paginate\n  }\n\n  // Initialize our service with any options it requires\n  app.use('/projects', createService(options))\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('projects')\n\n  service.hooks(hooks)\n\n  if (service.filter) {\n    service.filter(filters)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/projects/projects.service.js","// See http://docs.sequelizejs.com/en/latest/docs/models-definition/\n// for more of what you can do here.\nconst Sequelize = require('sequelize')\nconst DataTypes = Sequelize.DataTypes\n\nmodule.exports = function (app) {\n  const sequelizeClient = app.get('sequelizeClient')\n  const projects = sequelizeClient.define('projects', {\n    id: {\n      type: DataTypes.UUID,\n      primaryKey: true,\n      defaultValue: DataTypes.UUIDV4\n    },\n    name: {\n      type: DataTypes.TEXT,\n      allowNull: false\n    },\n    public: {\n      type: DataTypes.BOOLEAN,\n      allowNull: false\n    }\n  }, {\n    hooks: {\n      beforeCount (options) {\n        options.raw = true\n      }\n    }\n  })\n\n  projects.associate = function (models) { // eslint-disable-line no-unused-vars\n    models.projects.belongsTo(models.company) // generates companyId\n  }\n\n  return projects\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/projects.model.js","const { authenticate } = require('feathers-authentication').hooks\nmodule.exports = {\n  before: {\n    all: [ ],\n    find: [],\n    get: [],\n    create: [authenticate('jwt')],\n    update: [authenticate('jwt')],\n    patch: [authenticate('jwt')],\n    remove: [authenticate('jwt')]\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/projects/projects.hooks.js","/* eslint no-console: 1 */\nconsole.warn('You are using the default filter for the projects service. For more information about event filters see https://docs.feathersjs.com/api/events.html#event-filtering') // eslint-disable-line no-console\n\nmodule.exports = function (data, connection, hook) { // eslint-disable-line no-unused-vars\n  return data\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/projects/projects.filters.js","// Application hooks that run for every service\nconst logger = require('./hooks/logger')\n\nmodule.exports = {\n  before: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [ logger() ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [ logger() ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.hooks.js","// A hook that logs service method before, after and error\nconst logger = require('winston')\n\nmodule.exports = function () {\n  return function (hook) {\n    let message = `${hook.type}: ${hook.path} - Method: ${hook.method}`\n\n    if (hook.type === 'error') {\n      message += `: ${hook.error.message}`\n    }\n\n    logger.info(message)\n    logger.debug('hook.data', hook.data)\n    logger.debug('hook.params', hook.params)\n\n    if (hook.result) {\n      logger.debug('hook.result', hook.result)\n    }\n\n    if (hook.error) {\n      logger.error(hook.error)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hooks/logger.js","const authentication = require('feathers-authentication')\nconst jwt = require('feathers-authentication-jwt')\nconst local = require('feathers-authentication-local')\nconst authManagement = require('feathers-authentication-management')\nconst notifier = require('./notifier')\n\nmodule.exports = function () {\n  const app = this\n  const config = app.get('authentication')\n\n  // Set up authentication with the secret\n  app.configure(authentication(config))\n  app.configure(jwt())\n  app.configure(local())\n  app.configure(authManagement(notifier(app)))\n  // The `authentication` service is used to create a JWT.\n  // The before `create` hook registers strategies that can be used\n  // to create a new valid JWT (e.g. local or oauth2)\n  app.service('authentication').hooks({\n    before: {\n      create: [\n        authentication.hooks.authenticate(config.strategies)\n      ],\n      remove: [\n        authentication.hooks.authenticate('jwt')\n      ]\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/authentication.js","module.exports = require(\"feathers-authentication-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers-authentication-jwt\"\n// module id = 88\n// module chunks = 0","const Sequelize = require('sequelize')\nconst seed = require('./seed')\nmodule.exports = function () {\n  const app = this\n  const connectionString = app.get('postgres')\n  const sequelize = new Sequelize(connectionString, {\n    dialect: 'postgres',\n    logging: true,\n    define: {\n      freezeTableName: true\n    }\n  })\n  const oldSetup = app.setup\n\n  app.set('sequelizeClient', sequelize)\n\n  app.setup = function (...args) {\n    const result = oldSetup.apply(this, args)\n\n    // Set up data relationships\n    const models = sequelize.models\n    Object.keys(models).forEach(name => {\n      if ('associate' in models[name]) {\n        models[name].associate(models)\n      }\n    })\n\n    // Sync to the database\n    sequelize.sync().then(() => {\n      app.configure(seed)\n    })\n\n    return result\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sequelize.js","const rolesData = require('./roles.js')\nconst usersData = require('./users.js')\nconst companyData = require('./company.js')\nconst Tiler = require('../tiler.js')\n\nmodule.exports = function () {\n  const app = this\n  const ifEmptyCreate2 = ifEmptyCreate.bind(this)\n  app.configure(ifEmptyCreate2('roles', rolesData))\n  app.configure(ifEmptyCreate2('users', usersData))\n  app.configure(ifEmptyCreate2('company', companyData))\n  app.configure(tile)\n}\n\n// ### ifEmptyCreate(model, data)\n/**\n * If the model is empty then populate it's data\n * @param {object} model Mongoose Model\n * @param {object|object[]} data Object data or Array of Object data to insert\n * @return {function} Returns a method to be called by configure\n */\nfunction ifEmptyCreate (name, data) {\n  return async () => {\n    try {\n      let found = await this.service(name).find({query: {}})\n      if (found && Number.isInteger(found.total) && Array.isArray(found.data)) {\n        found = found.data\n      }\n      if (found.length !== 0) { return false }\n      await this.service(name).create(data)\n      console.log('default ' + name + ' created')\n    } catch (err) {\n      if (err) { console.log('trouble seeding ' + name + ': ', err) }\n    }\n  }\n}\n\nfunction tile () {\n  const service = this.service('data')\n  return service.find({\n    query: {\n      progress: {\n        $lt: 100\n      }\n    }\n  }).then(data => {\n    data.forEach(item => {\n      const tiler = new Tiler(item, service)\n      tiler.create()\n    })\n  }).catch(function (error) {\n    console.error(error)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/seed/index.js","const system = {\n  role: 'system'\n}\n\nconst admin = {\n  role: 'admin'\n}\n\nconst basic = {\n  role: 'basic'\n}\n\nmodule.exports = [system, admin, basic]\n\n\n\n// WEBPACK FOOTER //\n// ./src/seed/roles.js","const system = {\n  role: 'system',\n  email: 'rut@le34.dk',\n  password: process.env.PASSWORD || 'admin',\n  isVerified: true,\n  companyId: '6714a515-bec0-4d2b-a5e4-76d16cb845c0'\n}\n\nmodule.exports = [ system ]\n\n\n\n// WEBPACK FOOTER //\n// ./src/seed/users.js","const clients = [\n  {\n    id: '5b9462c3-bd11-4bd0-8937-7db762fb22c0',\n    name: 'Wicotec Kirkebjerg A/S',\n    cvrno: '73585511',\n    type: 'opdragsgiver',\n    clients: ['edaf7d39-985a-4396-85ff-d5a5d4450a16', 'b927d198-351f-4c5d-9054-424bf6fb7c94']\n  },\n  {\n    id: '6714a515-bec0-4d2b-a5e4-76d16cb845c0',\n    name: 'LE34',\n    cvrno: '27758592',\n    type: 'opdragsgiver',\n    clients: ['0b67b5af-ed80-4860-9c49-864060d8ae25', 'b927d198-351f-4c5d-9054-424bf6fb7c94']\n  },\n  {\n    id: '1ec75ea6-7022-4813-9e2d-2630003ea392',\n    name: 'JFE A/S',\n    cvrno: '74760716',\n    type: 'opdragsgiver',\n    clients: ['b428964d-13b3-4aea-91ad-4e32f3481959', '7282afcb-b458-4c6b-b57b-a5cb9e5a6a68', 'bd52f4a5-2cfe-4aff-a0dc-cca6e50f463b']\n  },\n  {\n    id: 'edaf7d39-985a-4396-85ff-d5a5d4450a16',\n    name: 'Albertslund Varmevrk',\n    cvrno: '1003267160',\n    type: 'slutbruger'\n  },\n  {\n    id: 'b927d198-351f-4c5d-9054-424bf6fb7c94',\n    name: 'Hvals Kraftvarmevrk',\n    cvrno: '44057212',\n    type: 'slutbruger'\n  },\n  {\n    id: '0b67b5af-ed80-4860-9c49-864060d8ae25',\n    name: 'Egedal Fjernvarme',\n    cvrno: '35410538',\n    type: 'slutbruger'\n  },\n  {\n    id: '1d95ef7d-e51a-42f4-82fa-91b277f4c148',\n    name: 'EnergiMidt',\n    cvrno: '36423544',\n    type: 'slutbruger'\n  },\n  {\n    id: 'b428964d-13b3-4aea-91ad-4e32f3481959',\n    name: 'Solrd Fjernvarme amba',\n    cvrno: '23104113',\n    type: 'slutbruger'\n  },\n  {\n    id: '7282afcb-b458-4c6b-b57b-a5cb9e5a6a68',\n    name: 'Rdovre Kommunale Fjernvarmeforsyning',\n    cvrno: '6530731677',\n    type: 'slutbruger'\n  },\n  {\n    id: 'bd52f4a5-2cfe-4aff-a0dc-cca6e50f463b',\n    name: 'Norfors I/S',\n    cvrno: '14748539',\n    type: 'slutbruger'\n  },\n  {\n    id: '7c830e38-9903-44e6-98f7-7f79941b16ff',\n    name: 'DONG',\n    cvrno: '1234',\n    type: 'slutbruger'\n  },\n  {\n    id: 'c06ea06e-25b5-473e-80ec-abd894a27ddc',\n    name: 'KE_Transmission',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: 'f4e2bbf9-55b7-4e59-9ff0-2155544fc1fe',\n    name: 'Kemp_Lauritzen',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: 'aa160aff-b9be-4cdc-8590-fd203644c5e7',\n    name: 'NCC',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: 'b9e22955-89ce-43e6-87f6-4de131436a22',\n    name: 'Demo',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: '2e8df1dd-458d-4c8e-8498-7f79931b15ff',\n    name: 'MTH',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: 'd78ae731-0026-46fd-be2b-c05e6663cfe5',\n    name: 'Bravida',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: '020c4051-b910-438c-a50b-8a3fe1898fda',\n    name: 'Nordkysten',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  },\n  {\n    id: '7c730e38-9903-44e6-98f7-9c32c87c9c03',\n    name: 'Munck',\n    cvrno: '',\n    type: 'opdragsgiver',\n    clients: ['7c830e38-9903-44e6-98f7-7f79941b16ff']\n  }\n]\n\nmodule.exports = clients.map(client => {\n  return {\n    id: client.id,\n    data: {\n      name: client.name,\n      cvrno: client.cvrno,\n      type: client.type,\n      clients: client.clients\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/seed/company.js"],"sourceRoot":""}